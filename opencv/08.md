### imread 灰色图和2gray 的区别：

这两种灰度图是有区别的，

- `cv::IMREAD_COLOR` 解析jpg时候，由`cv::JpegDecoder`解码得到一个RGB图像，然后由`icvCvt_RGB2BGR_8u_C3R()` 函数交换R和B空间，得到BGR格式的彩色图。
- `cv::IMREAD_GRAYSCALE` 这个图像由`cv::JpegDecoder`解码得到一个灰度图，所有的颜色转换和其他预处理或后处理等相关细节都是由**libjpeg**处理的，最后，将解压缩的数据复制到给定`cv::Mat`的内部缓冲区中。因此，在`cv::IMREAD_GRAYSCALE`中没有调用opencv中的函数`cv::cvtColor`来进行颜色转换

imread没有使用cvtColor（）来改变颜色，而是使用**libjpeg**；



imread，可能是在读取的时候



在Opencv中单通道图就是灰度图？



DST的缩写是destination ！！！-目标图像；





threshold(src, thresh, maxval, type, dst=None, /) -> retval, dst







### 一、原理

对于图像由彩色图转化为灰度图有三种方法

分别为 加权法 均值法 最大值法

加权法就是 GRAY==0.3 * R + 0.59 * G + 0.11 * B			（对于彩色转灰度，有一个很著名的心理学公式）

均值法就是 GRAY==(R+G+B)/3

最大值法就是 max（R,G,B）



把BGR三值进行计算，最后得到需要的  Gray的值



## 彩色图灰度图深度图

 

彩色图是三通道的，格式有RGB、YCbCr、YUV等

[图像深度](https://www.baidu.com/s?wd=图像深度&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)为24，用R:G:B=8:8:8来表示色彩，则R、G、B各占用8位来表示各自基色分量的强度，每个基色分量的强度等级为2^8=256种。图像可容纳2^24=16M种色彩(24位色)。24位色被称为[真彩色](https://www.baidu.com/s?wd=真彩色&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)，它可以达到人眼分辨的极限。

> 像素深度是指存储每个像素所需要的比特数。假定存储每个像素需要8bit，则图像的像素深度为8。
>
> 图像深度是指像素深度中实际用于存储图像的灰度 或色彩 所需要的比特位数。
>
> 假定图像的像素深度为16bit，但用于表示图像的灰度或色彩的位数只有15位，则图像的图像深度为15。
>
> 图像深度决定了图像的每个像素可能的颜色数，或可能的灰度级数。
>
> 例如，彩色图像每个像素用R,G,B三个分量表示,每个分量用8位，像素深度为24位

---

> **真彩色**：RGB
>
> **伪彩色**：CLUB Color Look-Up Table，像素存放的是颜色查找表的 表项入口地址，不是图像本身真正的颜色，它没有完全反映原图的彩色。
>
> > 伪彩色处理主要是把黑白的灰度图像或者多波段图像转换为彩色图像的技术过程。其目的是提高图像内容的可辨识度。其中方法有，[灰度](https://baike.baidu.com/item/灰度/4615393)分成法，灰度变换法。
>
> **直接色**：(direct color)每个像素值分成R，G，B分量，每个分量作为单独的索引值对它做变换。也就是通过相应的彩色变换表找出基色强度，用变换后得到的R，G，B强度值产生的彩色称为直接色。它的特点是对每个基色进行变换。 	更真实？

RGB图像每一个像素的颜色值（由RGB三原色表示）直接存放在图像矩阵中，由于每一像素的颜色需由R、G、B三个分量来表示，M、N分别表示图像的行列数，三个M x N的二维矩阵分别表示各个像素的R、G、B三个颜色分量。RGB图像的数据类型一般为8位无符号整形，通常用于表示和存放真彩色图像，当然也可以存放灰度图像。

> uint8是8位无符号整型，范围是0~255；
>
> 存放灰色图像的话，三个通道的值应该是一样的；

灰度图只有亮度通道Y（饱和度和色调为0）

0黑，255是白。RGB 模式中三原色光各有256个级别。由于灰度的形成是RGB 数值相等。而RGB 数值
相等的[排列组合](https://www.baidu.com/s?wd=排列组合&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)是256个，那么灰度的数量就是256级

> （0，0，0）~（255，255，255）

灰度最高相当于最高的黑，就是纯黑。灰度最低相当于最低的黑，也就是“没有黑”，那就是纯白。灰度[数字图像](https://www.baidu.com/s?wd=数字图像&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)是每个像素只有一个采样颜色的图像。这类图像通常显示为从最暗黑色到最亮的白色的灰度，尽管理论上这个采样可以是任何颜色的不同深浅，甚至可以是不同亮度上的不同颜色。

[灰度图像](https://www.baidu.com/s?wd=灰度图像&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)与黑白图像不同，在计算机图像领域中黑白图像只有黑白两种颜色，灰度图像在黑色与白色之间还有许多级的颜色深度。（三大调？）

深度图：Depth Map（深度图反映三维场景中物体距离相机的远近。其中，Depth Map 类似于灰度图像，只是它的每个像素值是传感器距离物体的实际距离。**通常RGB图像和Depth图像是配准的**，因而像素点之间具有一对一的对应关系。

> **图像深度** 是指存储每个像素所用的位数，也用于量度图像的色彩分辨率。
>
> **图像深度** 确定彩色图像的每个像素可能有的颜色数，或者确定灰度图像的每个像素可能有的灰度级数。它决定了彩色图像中可出现的最多颜色数，或灰度图像中的最大灰度等级。比如一幅单色图像,若每个像素有8位，则最大灰度数目为2的8次方，即256。一幅彩色图像RGB三通道的像素位数分别为4,4,2，则最大颜色数目为2的4+4+2次方，即1024，就是说像素的深度为10位，每个像素可以是1024种颜色中的一种。



**《编程珠玑》**



> 位图法就是bitmap的缩写。所谓bitmap，就是用每一位来存放某种状态，适用于大规模数据，但数据状态又不是很多的情况。通常是用来判断某个数据存不存在的。在STL中有一个bitset容器，其实就是位图法



